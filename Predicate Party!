package com.company;

import java.util.*;
import java.util.function.*;
import java.util.stream.Collectors;

public class Main {

    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);

        List<String> people = Arrays.stream(scanner.nextLine().split("\\s+")).collect(Collectors.toList());

        BiPredicate<String[], String> check = (tokens, current) -> {

            // Check if it starts with "StartsWith"

            if (tokens[1].equals("StartsWith")) {
                return current.startsWith(tokens[2]);
            } else if (tokens[1].equals("EndsWith")) {
                return current.endsWith(tokens[2]);
            }
            // In all other cases it will equal "Length"
            else {
                return current.length() == Integer.parseInt(tokens[2]);
            }
        };

        String command;
        while (!"Party!".equals(command = scanner.nextLine())) {
            String[] tokens = command.split("\\s+"); // Read each command and split it so the info can be used properly
            
            if (tokens[0].equals("Remove")) {
                people = people.stream().filter(e -> !check.test(tokens, e)).collect(Collectors.toList()); // We have to remove the people who don't match the conditions in the predicate as this will be removal in lambda function
            } else if (tokens[0].equals("Double")) {
                // Create a list for the people who match the criteria from the predicate
                List<String> peopleToAdd = people.stream().filter(person->check.test(tokens,person)).collect(Collectors.toList());
                // Add the people that match the criteria to the end of the original people list
                people.addAll(peopleToAdd); 
            }
        }

        if (people.isEmpty()) {
            System.out.println("Nobody is going to the party!");
        } else {
            Collections.sort(people); // Sort the names in increasing order
            System.out.println(String.join(", ", people) + " are going to the party!");
        }
    }

}
